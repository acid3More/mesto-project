(()=>{"use strict";var e=document.querySelectorAll(".popup"),t=document.querySelector("#form-profile"),n=document.querySelector("#name-input"),o=document.querySelector("#job-input"),r=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__title"),c=document.querySelector(".profile__subtitle"),p=document.querySelectorAll(".popup__close-button"),i=document.querySelector("#form-card"),l=document.querySelector("#card-name-input"),a=document.querySelector("#card-link-input"),d=document.querySelector(".profile__add-button"),s=document.querySelector("#card-submit"),m=document.querySelector(".popup__title"),_=document.querySelector(".popup__image"),f=document.querySelector("#profile-submit"),v=document.querySelector("#popup-profile"),y=document.querySelector("#image-popup"),S=document.querySelector("#popup-card"),q=document.querySelector(".elements__list"),b=document.querySelector("#template-card").content,k={popupForm:".popup__form",popupInput:".popup__input",popupButtonSubmit:".popup__submit-button",popupError:".popup__input-error"};function L(e){e.classList.add("popup_opened")}function g(){document.querySelector(".popup_opened").classList.remove("popup_opened")}function E(e){e.currentTarget===e.target&&e.target.classList.remove("popup_opened")}function h(e){var t=function(e,t){var n=b.cloneNode(!0),o=n.querySelector(".element__image"),r=n.querySelector(".element__name");return o.src=t,r.textContent=e,o.alt=e,o.addEventListener("click",(function(){_.src=o.src,_.alt=o.alt,m.textContent=o.alt,L(y)})),n.querySelector(".element__button").addEventListener("click",C),n.querySelector(".element__remove-btn").addEventListener("click",x),n}(e.name,e.link);q.prepend(t)}function x(e){e.target.closest(".element").remove()}function C(e){e.target.classList.toggle("element__button_active")}function j(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.textContent=""}function A(e){var t=Array.from(e.querySelectorAll(k.popupInput));t.forEach((function(n){var o=e.querySelector(k.popupButtonSubmit);n.addEventListener("input",(function(){!function(e,t){t.validity.valid?j(e,t):function(e,t,n){e.querySelector(".".concat(t.id,"-error")).textContent=n,t.classList.add("popup__input_type_error")}(e,t,t.validationMessage)}(e,n),B(t,o)}))}))}function w(e,t,n,o){t.forEach((function(t){return j(e,t)})),B(t,n)}function B(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("popup__submit-button_inactive")):(t.disabled=!0,t.classList.add("popup__submit-button_inactive"))}window.onkeydown=function(e){"Escape"===e.key&&document.querySelector(".popup_opened").classList.remove("popup_opened")},o.value=c.textContent,n.value=u.textContent,[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach(h),function(e){Array.from(document.querySelectorAll(e.popupForm)).forEach((function(e){A(e)}))}(k),e.forEach((function(e){return e.addEventListener("click",E)})),r.addEventListener("click",(function(){w(v,[n,o],f),o.value=c.textContent,n.value=u.textContent,L(v)})),d.addEventListener("click",(function(){w(S,[l,a],s),L(S),l.value="",a.value=""})),t.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=o.value,u.textContent=n.value,g()})),i.addEventListener("submit",(function(e){e.preventDefault(),h({name:l.value,link:a.value}),g()})),p.forEach((function(e){e.addEventListener("click",g)}))})();